<!-- This code stores the custom styles used within Arriaga's service list contact
form. It is in reference to the iframe document and all selectors are taken from
that root. All styles are directly applied within GHL under "Custom Code"  -->
<script>
	console.log('[Style Override] Script loaded');

	// Clean up inline styles for both targets
	function clearInlineStyles() {
		const section = document.querySelector('[id="1cDkyOkhgmxiS8sbXBb9"]');
		const serviceMenu = document.querySelector('#cal_servicemenu_widgets');

		if (section) {
			section.style.scrollMarginTop = '';
			section.style.paddingBottom = '';
		}

		if (serviceMenu) {
			serviceMenu.style.paddingTop = '';
			serviceMenu.style.paddingBottom = '';
		}
	}

	// Re-run until both elements exist
	function initObserver() {
		const section = document.querySelector('[id="1cDkyOkhgmxiS8sbXBb9"]');
		const serviceMenu = document.querySelector('#cal_servicemenu_widgets');

		if (!section && !serviceMenu) return setTimeout(initObserver, 300);

		clearInlineStyles();

		// Single observer for both elements
		const observer = new MutationObserver(() => {
			clearInlineStyles();
		});

		if (section)
			observer.observe(section, {
				attributes: true,
				attributeFilter: ['style'],
			});
		if (serviceMenu)
			observer.observe(serviceMenu, {
				attributes: true,
				attributeFilter: ['style'],
			});

		console.log('[Style Override] MutationObserver active');
	}

	// Auto-init
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', initObserver);
	} else {
		initObserver();
	}
</script>

<style>
	body {
		background: rgba(120, 120, 120, 0.1);
	}

	#cal_servicemenu_widgets {
		padding-top: 0px !important;
		padding-bottom: 0px !important;
	}

	[id='1cDkyOkhgmxiS8sbXBb9'] {
		scroll-margin-top: unset !important;
		padding-bottom: 0px !important;
	}
</style>

<script>
	const iframeSelectors = [
		{
			element: 'body',
			selector: 'body',
			borderColor: 'red',
		},
		{
			element: 'scrollContainer',
			selector: '#cal_servicemenu_widgets',
			borderColor: 'purple',
		},
		{
			element: 'serviceMenuWidget',
			selector: '.calendar-service-v2-main-container.appointment_service--list',
			borderColor: 'green',
		},
		{
			element: 'serviceCardSection',
			selector: '[id="1cDkyOkhgmxiS8sbXBb9"]',
			borderColor: 'blue',
		},
	];

	iframeSelectors.forEach((el) => {
		console.log('el structure', el);
		const element = document.querySelector(el.selector);
		element.style.border = `2px solid ${el.borderColor}`;
	});
</script>
